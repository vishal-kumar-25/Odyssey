<% layout('/layouts/boilerplate') -%>
<div class="row">
    <div class="col-8 offset-2">
<h3>Listing Details :</h3>
</div>
<div>
<div class="card col-6 offset-2">
    <img src="<%= listing.image %>>" class="card-img-top show-img" alt="listing_image">
    <%= listing.title %>
  <div class="card-body">
    <!-- <a href="#" class="btn btn-primary">Go somewhere</a> -->
  </div>
</div>

    <ul>
        <li><%= listing.title %></li>    
        <li><%= listing.description %></li>
        <li>&#8377; <%= listing.price.toLocaleString("en-IN") %></li>
        <li><%= listing.location %></li>
        <li><%= listing.country %></li>
    </ul>
    <br />
    <a href="/listings/<%= listing._id %>/edit">Edit this Listing</a> 
    <br/><br/>
    <form method="POST" action="/listings/<%= listing._id %>?_method=DELETE"> 
        <button>Delete this listing</button> 
    </form>

    <div class="col-8 offset-3 mb-3">
        <br>
        <h4>Leave a Review</h4>
        <form action="/listings/<%= listing._id %>/reviews" method="POST" novalidate class="needs-validation"> <!-- Change "listings" to "listing" -->
         <div class="mb-3 mt-3">
            <label for="rating" class="form-label">Rating</label>
            <input type="range" min="1" max="5" id="rating" name="review[rating]" class="form-range">
         </div>
         <div class="mb-3 mt-3">
            <label for="comment" class="form-label">Comments</label> <!-- Fixed typo in "for" attribute -->
            <textarea name="review[comment]"
             id="comment" 
             cols="30"
             rows="5"
             class="form-control"
             required
           ></textarea>
           <div class="invalid-feedback">
            Please add some comments for review
           </div>
         </div>
         <button class="btn btn-outline-dark">Submit</button>
        </form>
  
         <hr/>
        
    <p><b>All Reviews</b></p>

        <% for(review of listing.reviews) { %>
            <div class="card">
       <div class="card-body">
        <h5>class="card-title">Abhishek Singh</h5> 
        <p class="card-text">review.comment</p>
        <p class="card-text">review.rating</p>
       </div>
            </div>
           <% } %>
       </div>
    </div>
</div>


